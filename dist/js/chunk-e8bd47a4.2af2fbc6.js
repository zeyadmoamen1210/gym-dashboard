(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e8bd47a4"],{"3e2b":function(t,i,a){"use strict";a.r(i);var e=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"recent-history"},[e("div",{staticClass:"container"},[t._m(0),e("vs-table",{scopedSlots:t._u([{key:"thead",fn:function(){return[e("vs-tr",[e("vs-th",[t._v(" User. ")]),e("vs-th",[t._v(" Date ")]),e("vs-th",[t._v(" Client ID ")]),e("vs-th",[t._v(" Amount ")]),e("vs-th",[t._v(" Status ")]),e("vs-th",[t._v(" Actions ")])],1)]},proxy:!0},{key:"tbody",fn:function(){return t._l(t.obligations,(function(i,o){return e("vs-tr",{key:o,attrs:{data:i.id}},[e("vs-td",{staticStyle:{display:"flex"}},[e("vs-avatar",{attrs:{history:"","history-gradient":""}},[e("img",{attrs:{src:i.user[0].photo,alt:""}})]),e("span",{staticStyle:{padding:"10px"}},[t._v(" "+t._s(i.user[0].username)+" ")])],1),e("vs-td",[t._v(" "+t._s(new Date(i.dateObligation.date).toLocaleDateString())+" ")]),e("vs-td",[t._v(" "+t._s(i.user[0]._id)+" ")]),e("vs-td",{staticStyle:{"font-weight":"500"}},[e("img",{staticStyle:{width:"20px"},attrs:{src:a("7f68"),alt:""}}),t._v(" "+t._s(i.dateObligation.amount)+" ")]),e("vs-td",["upcoming"==i.dateObligation.status?e("span",{staticClass:"status",staticStyle:{background:"#f9ca24"}},[t._v(" "+t._s(i.dateObligation.status)+" ")]):t._e(),"paid"==i.dateObligation.status?e("span",{staticClass:"status",staticStyle:{background:"#6ab04c"}},[t._v(" "+t._s(i.dateObligation.status)+" ")]):t._e(),"Draft"==i.dateObligation.status?e("span",{staticClass:"status",staticStyle:{background:"#eb4d4b"}},[t._v(" "+t._s(i.dateObligation.status)+" ")]):t._e()]),e("vs-td",{staticStyle:{}},["paid"!=i.dateObligation.status?e("vs-button",{staticStyle:{margin:"auto"},attrs:{color:"whatsapp",circle:"",icon:"",floating:""},on:{click:function(a){return t.handlePayBil(i,i.dateObligation)}}},[e("img",{staticStyle:{width:"15px"},attrs:{src:a("b8e5"),alt:""}})]):t._e(),e("vs-button",{staticStyle:{margin:"auto"},attrs:{color:"primary",circle:"",icon:"",floating:""},on:{click:function(a){return t.readyToPrint(i)}}},[e("img",{staticStyle:{width:"15px"},attrs:{src:a("c1ce"),alt:""}})]),t.isAdmin()?e("vs-button",{staticStyle:{margin:"auto"},attrs:{color:"#ff3e4e",circle:"",icon:"",floating:""},on:{click:function(a){return t.handleDeleteObligation(i)}}},[e("img",{staticStyle:{width:"15px"},attrs:{src:a("d739"),alt:""}})]):t._e()],1)],1)}))},proxy:!0},t.totalPages>1?{key:"footer",fn:function(){return[e("vs-pagination",{attrs:{length:t.totalPages},model:{value:t.page,callback:function(i){t.page=i},expression:"page"}})]},proxy:!0}:null],null,!0)})],1),e("vs-dialog",{attrs:{color:"danger",width:"550px","not-center":""},scopedSlots:t._u([{key:"header",fn:function(){return[e("h4",{staticClass:"not-margin"},[t._v(" Pay Obligation ")])]},proxy:!0},{key:"footer",fn:function(){return[e("div",{staticClass:"con-footer",staticStyle:{display:"flex"}},[e("vs-button",{attrs:{color:"primary",transparent:""},on:{click:function(i){return t.payBil()}}},[e("img",{staticStyle:{width:"20px"},attrs:{src:a("7f68"),alt:""}}),t._v(" Pay This Obligation ")]),e("vs-button",{attrs:{dark:"",transparent:""},on:{click:function(i){t.showPayConfirm=!1}}},[t._v(" Cancel ")])],1)]},proxy:!0}]),model:{value:t.showPayConfirm,callback:function(i){t.showPayConfirm=i},expression:"showPayConfirm"}},[e("div",{staticClass:"con-content"},[e("p",[t._v(" Are You Sure You Want To Pay This Obligations "),e("br"),t._v(" This Will Cost "),e("span",{staticStyle:{"font-weight":"bold"}},[t._v(" "+t._s(t.currObli.amount)+" ")]),t._v(" "),e("img",{staticStyle:{width:"20px"},attrs:{src:a("7f68"),alt:""}})])])]),e("b-modal",{ref:"modal",staticClass:"add-memb",attrs:{id:"modal-preven-payNew",title:"Submit Your Name","hide-header":"","hide-footer":""}},[e("div",[e("div",{staticClass:"center content-inputs"},[e("label",{attrs:{for:""}},[t._v(" Amount: ")]),e("vs-input",{staticStyle:{width:"100%"},attrs:{type:"number",placeholder:"Amount"},model:{value:t.newFatora.amount,callback:function(i){t.$set(t.newFatora,"amount",i)},expression:"newFatora.amount"}})],1),e("vs-button",{staticStyle:{"margin-top":"15px"},on:{click:function(i){return t.payNewFatora()}}},[t._v(" Pay Obligation ")])],1)]),e("vs-dialog",{attrs:{color:"danger",width:"550px","not-center":""},scopedSlots:t._u([{key:"header",fn:function(){return[e("h4",{staticClass:"not-margin"},[t._v(" Delete Obligation ")])]},proxy:!0},{key:"footer",fn:function(){return[e("div",{staticClass:"con-footer",staticStyle:{display:"flex"}},[e("vs-button",{attrs:{color:"danger",transparent:""},on:{click:t.removeObligation}},[e("img",{staticStyle:{width:"20px",margin:"0 4px"},attrs:{src:a("c6378"),alt:""}}),t._v(" Ok ")]),e("vs-button",{attrs:{dark:"",transparent:""},on:{click:function(i){t.showdeleteObligConfirm=!1}}},[t._v(" Cancel ")])],1)]},proxy:!0}]),model:{value:t.showdeleteObligConfirm,callback:function(i){t.showdeleteObligConfirm=i},expression:"showdeleteObligConfirm"}},[e("div",{staticClass:"con-content"},[e("p",[t._v(" Are You Sure You Want To Delete This Obligation ")])])])],1)},o=[function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",{staticClass:"recent-history-head"},[a("div",{staticClass:"history-obligation"},[a("div",[a("h4",{staticClass:"head"},[t._v("Obligations History")])])])])}],n=a("5530"),s=(a("d3b7"),a("99af"),a("be3b")),r={data:function(){return{obligations:[],page:1,totalPages:1,showPayConfirm:!1,currObli:{},payNew:{},user:{},newFatora:{},membId:"",currObliToDelete:{},showdeleteObligConfirm:!1}},methods:{isAdmin:function(){return"admin"==JSON.parse(localStorage.getItem("OxfitGymUser")).role},readyToPrint:function(t){localStorage.setItem("ReadyToPrint",JSON.stringify(t)),localStorage.getItem("ReadyToPrint")&&this.$router.push("/print-invoice/".concat(t._id))},handlePayBil:function(t,i){this.showPayConfirm=!0,this.user=t,this.currObli=Object(n["a"])({},i)},handleDeleteObligation:function(t){this.currObliToDelete=Object(n["a"])({},t),this.showdeleteObligConfirm=!0},removeObligation:function(){var t=this;this.showdeleteObligConfirm=!1;var i=this.$vs.loading();console.log(this.currObliToDelete),s["a"].post("/deleteObligation",{obligationId:this.currObliToDelete.dateObligation._id}).then((function(){t.$vs.notification({title:"Success !",text:"Obligation Deleted Successfully",color:"success",position:"top-center"}),t.getPaymentHistory()})).finally((function(){return i.close()}))},payBil:function(){var t=this;this.showPayConfirm=!1;var i=this.$vs.loading();s["a"].post("/payBill",{memberId:this.user.memb[0]._id,obligionId:this.currObli._id,amount:this.currObli.amount}).then((function(){t.$vs.notification({title:"Success !",text:"Obligation Paid Successfully",color:"success",position:"top-center"}),t.getPaymentHistory()})).finally((function(){return i.close()}))},payNewFatora:function(){var t=this;this.$bvModal.hide("modal-preven-payNew");var i=this.$vs.loading();console.log(this.user),this.membId=this.obligations[0].memb[0]._id,s["a"].post("/payBill",{memberId:this.membId,amount:this.newFatora.amount}).then((function(){console.log("hello"),t.$vs.notification({title:"Success !",text:"Obligation Paid Successfully",color:"success",position:"top-center"}),t.getPaymentHistory()})).finally((function(){return i.close()}))},getPaymentHistory:function(){var t=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=this.$vs.loading();s["a"].get("getBills?id=".concat(this.$route.params.id,"&page=").concat(i)).then((function(i){t.obligations=i.data.docs,t.page=i.data.page,t.totalPages=i.data.totalPages})).finally((function(){return a.close()}))}},watch:{page:function(t){this.getPaymentHistory(t)}},created:function(){this.getPaymentHistory()}},l=r,c=(a("a124"),a("2877")),u=Object(c["a"])(l,e,o,!1,null,null,null);i["default"]=u.exports},"7f68":function(t,i,a){t.exports=a.p+"img/money-bag-with-dollar-symbol.2264c3e6.svg"},a124:function(t,i,a){"use strict";a("b4b7")},b4b7:function(t,i,a){},b8e5:function(t,i,a){t.exports=a.p+"img/dollar-symbol.e84c9222.svg"},c1ce:function(t,i,a){t.exports=a.p+"img/printer.caf4af24.svg"},c6378:function(t,i,a){t.exports=a.p+"img/trash.bd7cd293.svg"},d739:function(t,i,a){t.exports=a.p+"img/delete.684f8542.svg"}}]);
//# sourceMappingURL=chunk-e8bd47a4.2af2fbc6.js.map