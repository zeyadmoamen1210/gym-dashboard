(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-14d1e8b4"],{"366e":function(t,e,i){},"7f68":function(t,e,i){t.exports=i.p+"img/money-bag-with-dollar-symbol.2264c3e6.svg"},"9f0e":function(t,e,i){t.exports=i.p+"img/debt.b73fe6a7.svg"},b755:function(t,e,i){"use strict";i.r(e);var o=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"payments"},[o("div",{staticClass:"container"},[t._m(0),o("vs-table",{scopedSlots:t._u([{key:"thead",fn:function(){return[o("vs-tr",[o("vs-th",[t._v(" User ID ")]),o("vs-th",[t._v(" Created At ")]),o("vs-th",[t._v(" Total Recived ")]),o("vs-th",[t._v(" Obligated "),o("br"),t._v(" Amount ")]),o("vs-th",[t._v(" Last Invoice ")]),o("vs-th",[t._v(" Target ")]),o("vs-th",[t._v(" Next Due"),o("br"),t._v(" One ")]),o("vs-th",[t._v(" Actions ")])],1)]},proxy:!0},{key:"tbody",fn:function(){return t._l(t.payments,(function(e,n){return o("vs-tr",{key:n,attrs:{data:e}},[o("vs-td",{staticStyle:{display:"flex"}},[o("vs-avatar",{attrs:{history:"","history-gradient":""}},[o("img",{attrs:{src:e.user.photo,alt:""}})]),o("span",{staticStyle:{padding:"10px"}},[t._v(" "+t._s(e.user.username)+" ")])],1),o("vs-td",[t._v(" "+t._s(new Date(e.createdAt).toLocaleDateString())+" ")]),o("vs-td",[o("img",{staticStyle:{width:"20px"},attrs:{src:i("7f68"),alt:""}}),t._v(" "+t._s(e.Obligation.TotalRecieved)+" ")]),o("vs-td",[t._v(" "+t._s(e.Obligation.Obligation)+" ")]),o("vs-td",["upcoming"==e.dateObligation[e.dateObligation.length-1].status?o("vs-tooltip",{attrs:{color:"#ffc107"},scopedSlots:t._u([{key:"tooltip",fn:function(){return[o("span",{staticStyle:{"font-weight":"bold"}},[t._v("Upcoming")])]},proxy:!0}],null,!0)},[o("div",{staticStyle:{background:"#ffc107",height:"8px",width:"8px","border-radius":"50%",display:"inline-block",margin:"0 3px"}}),t._v(" "+t._s(new Date(e.dateObligation[e.dateObligation.length-1].date).toLocaleDateString())+" ")]):"upcoming"==e.dateObligation[e.dateObligation.length-1].status?o("vs-tooltip",{attrs:{color:"#25D366"},scopedSlots:t._u([{key:"tooltip",fn:function(){return[o("span",{staticStyle:{"font-weight":"bold"}},[t._v("Paid")])]},proxy:!0}],null,!0)},[o("div",{staticStyle:{background:"#25D366",height:"8px",width:"8px","border-radius":"50%",display:"inline-block",margin:"0 3px"}}),t._v(" "+t._s(new Date(e.dateObligation[e.dateObligation.length-1].date).toLocaleDateString())+" ")]):"draft"==e.dateObligation[e.dateObligation.length-1].status?o("vs-tooltip",{attrs:{color:"danger"},scopedSlots:t._u([{key:"tooltip",fn:function(){return[o("span",{staticStyle:{"font-weight":"bold"}},[t._v("Draft")])]},proxy:!0}],null,!0)},[o("div",{staticStyle:{background:"#25D366",height:"8px",width:"8px","border-radius":"50%",display:"inline-block",margin:"0 3px"}}),t._v(" "+t._s(new Date(e.dateObligation[e.dateObligation.length-1].date).toLocaleDateString())+" ")]):o("vs-tooltip",{attrs:{color:"primary"},scopedSlots:t._u([{key:"tooltip",fn:function(){return[o("span",{staticStyle:{"font-weight":"bold"}},[t._v("Not Found")])]},proxy:!0}],null,!0)},[o("div",{staticStyle:{background:"#25D366",height:"8px",width:"8px","border-radius":"50%",display:"inline-block",margin:"0 3px"}}),t._v(" -- ")])],1),o("vs-td",[o("vs-tooltip",{attrs:{color:"#2C4484"},scopedSlots:t._u([{key:"tooltip",fn:function(){return[o("span",{staticStyle:{"font-weight":"bold"}},[t._v("target: "+t._s((100*e.Obligation.TotalRecieved/(e.Obligation.Obligation+e.Obligation.TotalRecieved)).toFixed(2))+" %")])]},proxy:!0}],null,!0)},[o("div",{staticClass:"target"},[100*e.Obligation.TotalRecieved/(e.Obligation.Obligation+e.Obligation.TotalRecieved)<=30?o("div",{style:{width:100*e.Obligation.TotalRecieved/(e.Obligation.Obligation+e.Obligation.TotalRecieved)+"%",background:"#dc3545"}}):100*e.Obligation.TotalRecieved/(e.Obligation.Obligation+e.Obligation.TotalRecieved)>30&&100*e.Obligation.TotalRecieved/(e.Obligation.Obligation+e.Obligation.TotalRecieved)<=70?o("div",{style:{width:100*e.Obligation.TotalRecieved/(e.Obligation.Obligation+e.Obligation.TotalRecieved)+"%","background-color":"#ffc107"}}):o("div",{style:{width:100*e.Obligation.TotalRecieved/(e.Obligation.Obligation+e.Obligation.TotalRecieved)+"%","background-color":"#28a745"}})])])],1),e.dateObligation.length>0&&e.dateObligation.find((function(t){return"upcoming"==t.status}))?o("vs-td",[t._v(" "+t._s(new Date(e.dateObligation.find((function(t){return"upcoming"==t.status})).date).toLocaleDateString())+" ")]):o("vs-td",[t._v(" -- ")]),o("vs-td",{staticStyle:{}},[o("vs-button",{attrs:{color:"whatsapp",circle:"",icon:"",floating:""},on:{click:function(i){return t.$router.push("payments/"+e.memb[0].id)}}},[o("img",{staticStyle:{width:"15px"},attrs:{src:i("b8e5"),alt:""}})]),t.isAdmin()?o("vs-button",{attrs:{color:"#ff3e4e",circle:"",icon:"",floating:""},on:{click:function(i){return t.handleDeleteMembership(e)}}},[o("img",{staticStyle:{width:"15px"},attrs:{src:i("d739"),alt:""}})]):t._e(),o("vs-button",{attrs:{color:"#333",circle:"",icon:"",floating:""},on:{click:function(i){return t.$router.push("/payment-history/"+e.user.id)}}},[o("img",{staticStyle:{width:"15px"},attrs:{src:i("9f0e"),alt:""}})])],1)],1)}))},proxy:!0},t.totalPages>1?{key:"footer",fn:function(){return[o("vs-pagination",{attrs:{length:t.totalPages},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}})]},proxy:!0}:null],null,!0)})],1),o("vs-dialog",{attrs:{color:"danger",width:"550px","not-center":""},scopedSlots:t._u([{key:"header",fn:function(){return[o("h4",{staticClass:"not-margin"},[t._v(" Delete Membership ")])]},proxy:!0},{key:"footer",fn:function(){return[o("div",{staticClass:"con-footer",staticStyle:{display:"flex"}},[o("vs-button",{attrs:{color:"danger",transparent:""},on:{click:t.removeMemb}},[o("img",{staticStyle:{width:"20px",margin:"0 4px"},attrs:{src:i("c6378"),alt:""}}),t._v(" Ok ")]),o("vs-button",{attrs:{dark:"",transparent:""},on:{click:function(e){t.showDeleteConfirm=!1}}},[t._v(" Cancel ")])],1)]},proxy:!0}]),model:{value:t.showDeleteConfirm,callback:function(e){t.showDeleteConfirm=e},expression:"showDeleteConfirm"}},[o("div",{staticClass:"con-content"},[o("p",[t._v(" Are You Sure You Want To Delete This Membership ")])])])],1)},n=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"payments-head"},[i("div",[i("h4",{staticClass:"head"},[t._v("Payments")])])])}],a=i("5530"),s=(i("d3b7"),i("be3b")),l={data:function(){return{page:1,totalPages:1,payments:[],showDeleteConfirm:!1,currMemb:{}}},created:function(){this.getMembs()},watch:{page:function(t){this.getMembs(t)}},methods:{isAdmin:function(){return"admin"==JSON.parse(localStorage.getItem("OxfitGymUser")).role},handleDeleteMembership:function(t){this.currMemb=Object(a["a"])({},t),this.showDeleteConfirm=!0},removeMemb:function(){var t=this,e=this.$vs.loading();this.showDeleteConfirm=!1,s["a"].post("/deleteMembership",{membershipId:this.currMemb.id}).then((function(){t.$vs.notification({title:"Success !",text:"Membership Deleted Successfully",color:"success",position:"top-center"}),t.getMembs()})).finally((function(){return e.close()}))},getMembs:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=this.$vs.loading();s["a"].get("/getMemps?page=".concat(e)).then((function(e){t.payments=e.data.docs,t.page=e.data.page,t.totalPages=e.data.totalPages})).finally((function(){return i.close()}))}}},r=l,c=(i("c452"),i("2877")),d=Object(c["a"])(r,o,n,!1,null,null,null);e["default"]=d.exports},b8e5:function(t,e,i){t.exports=i.p+"img/dollar-symbol.e84c9222.svg"},c452:function(t,e,i){"use strict";i("366e")},c6378:function(t,e,i){t.exports=i.p+"img/trash.bd7cd293.svg"},d739:function(t,e,i){t.exports=i.p+"img/delete.684f8542.svg"}}]);
//# sourceMappingURL=chunk-14d1e8b4.dcf42035.js.map